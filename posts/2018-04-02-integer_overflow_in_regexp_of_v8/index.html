<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Integer Overflow in V8 | code(evening);</title><meta name=keywords content="Integer Overflow,V8"><meta name=description content="최근 취약점들을 살펴보면 순수하게 V8과 관련된 취약점은 별로 없고, 그나마 JavaScript로 시작하되 최종적으로는 Blink나 Chrome에서 취약점이 발생하는 경우들이 많은 것 같다. 와중에 최근에 등록된 버그가 눈길을 끌었다. V8 내부에서 정수 오버플로우(Integer Overflow)를 유발하는 PoC(Proof of Concept)를 제시하고 있었다. 대략적인 V8의 구조와 정수 오버플로우가 어떤 것인지 알게된 의미있는 분석이었다.
RegExp.prototype[@@replace] 해당 PoC는 결국에 C++ 함수인 Runtime_RegExpReplace()에서 발현된다.(이하 RegExpReplace) 이 함수는 자바스크립트 레벨에서 RegExp.prototype[@@replace] 메소드(이하 replace)에 대응되는 함수이다. RegExp는 무엇일까? 정규표현식을 표현하고 처리하기 위한 객체로 이해하면 된다."><meta name=author content="baek9"><link rel=canonical href=https://baek9.github.io/posts/2018-04-02-integer_overflow_in_regexp_of_v8/><link crossorigin=anonymous href=/assets/css/stylesheet.d7fb4cbf980fe688a21621b06a795933c4e6bb2d4070ec940667af1715d84af2.css integrity="sha256-1/tMv5gP5oiiFiGwanlZM8Tmuy1AcOyUBmevFxXYSvI=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://baek9.github.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=https://baek9.github.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://baek9.github.io/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://baek9.github.io/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://baek9.github.io/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,o,i,a,t,n,s){e.GoogleAnalyticsObject=t,e[t]=e[t]||function(){(e[t].q=e[t].q||[]).push(arguments)},e[t].l=1*new Date,n=o.createElement(i),s=o.getElementsByTagName(i)[0],n.async=1,n.src=a,s.parentNode.insertBefore(n,s)}(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-123-45','auto'),ga('send','pageview'))</script><meta property="og:title" content="Integer Overflow in V8"><meta property="og:description" content="최근 취약점들을 살펴보면 순수하게 V8과 관련된 취약점은 별로 없고, 그나마 JavaScript로 시작하되 최종적으로는 Blink나 Chrome에서 취약점이 발생하는 경우들이 많은 것 같다. 와중에 최근에 등록된 버그가 눈길을 끌었다. V8 내부에서 정수 오버플로우(Integer Overflow)를 유발하는 PoC(Proof of Concept)를 제시하고 있었다. 대략적인 V8의 구조와 정수 오버플로우가 어떤 것인지 알게된 의미있는 분석이었다.
RegExp.prototype[@@replace] 해당 PoC는 결국에 C++ 함수인 Runtime_RegExpReplace()에서 발현된다.(이하 RegExpReplace) 이 함수는 자바스크립트 레벨에서 RegExp.prototype[@@replace] 메소드(이하 replace)에 대응되는 함수이다. RegExp는 무엇일까? 정규표현식을 표현하고 처리하기 위한 객체로 이해하면 된다."><meta property="og:type" content="article"><meta property="og:url" content="https://baek9.github.io/posts/2018-04-02-integer_overflow_in_regexp_of_v8/"><meta property="og:image" content="https://baek9.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="posts"><meta property="article:published_time" content="2018-04-02T22:14:52+00:00"><meta property="article:modified_time" content="2018-04-02T22:14:52+00:00"><meta property="og:site_name" content="code(evening);"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://baek9.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="Integer Overflow in V8"><meta name=twitter:description content="최근 취약점들을 살펴보면 순수하게 V8과 관련된 취약점은 별로 없고, 그나마 JavaScript로 시작하되 최종적으로는 Blink나 Chrome에서 취약점이 발생하는 경우들이 많은 것 같다. 와중에 최근에 등록된 버그가 눈길을 끌었다. V8 내부에서 정수 오버플로우(Integer Overflow)를 유발하는 PoC(Proof of Concept)를 제시하고 있었다. 대략적인 V8의 구조와 정수 오버플로우가 어떤 것인지 알게된 의미있는 분석이었다.
RegExp.prototype[@@replace] 해당 PoC는 결국에 C++ 함수인 Runtime_RegExpReplace()에서 발현된다.(이하 RegExpReplace) 이 함수는 자바스크립트 레벨에서 RegExp.prototype[@@replace] 메소드(이하 replace)에 대응되는 함수이다. RegExp는 무엇일까? 정규표현식을 표현하고 처리하기 위한 객체로 이해하면 된다."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://baek9.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Integer Overflow in V8","item":"https://baek9.github.io/posts/2018-04-02-integer_overflow_in_regexp_of_v8/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Integer Overflow in V8","name":"Integer Overflow in V8","description":"최근 취약점들을 살펴보면 순수하게 V8과 관련된 취약점은 별로 없고, 그나마 JavaScript로 시작하되 최종적으로는 Blink나 Chrome에서 취약점이 발생하는 경우들이 많은 것 같다. 와중에 최근에 등록된 버그가 눈길을 끌었다. V8 내부에서 정수 오버플로우(Integer Overflow)를 유발하는 PoC(Proof of Concept)를 제시하고 있었다. 대략적인 V8의 구조와 정수 오버플로우가 어떤 것인지 알게된 의미있는 분석이었다.\nRegExp.prototype[@@replace] 해당 PoC는 결국에 C++ 함수인 Runtime_RegExpReplace()에서 발현된다.(이하 RegExpReplace) 이 함수는 자바스크립트 레벨에서 RegExp.prototype[@@replace] 메소드(이하 replace)에 대응되는 함수이다. RegExp는 무엇일까? 정규표현식을 표현하고 처리하기 위한 객체로 이해하면 된다.","keywords":["Integer Overflow","V8"],"articleBody":"최근 취약점들을 살펴보면 순수하게 V8과 관련된 취약점은 별로 없고, 그나마 JavaScript로 시작하되 최종적으로는 Blink나 Chrome에서 취약점이 발생하는 경우들이 많은 것 같다. 와중에 최근에 등록된 버그가 눈길을 끌었다. V8 내부에서 정수 오버플로우(Integer Overflow)를 유발하는 PoC(Proof of Concept)를 제시하고 있었다. 대략적인 V8의 구조와 정수 오버플로우가 어떤 것인지 알게된 의미있는 분석이었다.\nRegExp.prototype[@@replace] 해당 PoC는 결국에 C++ 함수인 Runtime_RegExpReplace()에서 발현된다.(이하 RegExpReplace) 이 함수는 자바스크립트 레벨에서 RegExp.prototype[@@replace] 메소드(이하 replace)에 대응되는 함수이다. RegExp는 무엇일까? 정규표현식을 표현하고 처리하기 위한 객체로 이해하면 된다. 다음 코드를 예로 들면,\nvar re = /-/g; re는 RegExp 객체이다. re에 대입한 “/-/g\"의 의미는 임의의 문장에서 “-“와 일치하는 모든 부분을 의미한다. 뒤에 붙은 ‘g’는 “global\"의 약자로서 일치하는 부분을 모두 식별하겠다는 의미이다. 한편, MDN(Mozilla Developers Network)에서 제시하는 replace() 메소드의 용법과 예제는 다음과 같다.\nvar str = '2016-01-01'; // regexp[Symbol.replace](str, newSubStr|function) var newstr = re[Symbol.replace](str, '.'); console.log(newstr); // 2016.01.01 replace() 메소드는 RegExp 객체의 메소드이다. 이 메소드는 Symbol 타입으로 정의되어 있다. 이 타입은 최신 ECMA Script에 새로 추가된 것으로서, 잘 모르기도 하지만 본 포스트의 주제와 맞지 않으므로 생략한다. 어쨌든, replace() 메소드는 두 개의 인자를 받는다. 첫 번째 인자는 원본 문자열이고, 두 번째 인자는 원본 문자열에서 정규표현식과 일치하는 부분을 치환하고자 하는 치환 문자열이다. 위 예에서 “2016-01-01“이라는 원본 문자열은 ‘-‘이 ‘.’으로 모두 치환된다.\nRegExp.prototype.exec() RegExp 객체의 exec() 메소드는 원본 문자열에서 정규표현식과 일치하는 부분을 객체 형태로 반환한다. 아래 예제를 보자.\nvar re = /foo/g; var result = re.exec('___foo___foo'); 객체 result는 원본 문자열에서 주어진 정규표현식과 일치하는 부분들에 대한 정보를 담는다. 아래는 해당 객체의 내용을 출력해 본 것이다.원본 문자열인 “___foo___foo”를 input 프로퍼티에, 정규표현식과 일치하는 부분 문자열인 “foo”를 0 프로퍼티에 담고 있다. 두 번 일치하지만 “foo”는 하나이므로 length가 1인 것으로 생각된다. 또, 원본 문자열에서 정규표현식과 일치하는 첫 번째 문자열이 시작하는 위치가 4이므로, index 프로퍼티에 4가 저장된 것으로 생각된다.\nresult = { 0:\"foo\" index:3 input:\"___foo___foo\" length:1 __proto__:Array(0) } RegExpUtils::RegExpExec() RegExp.prototype.exec() 함수는 V8 내부에서 RegExpExec() 함수를 호출하는 것으로 생각된다. 당연한 말이지만, 정규표현식과 일치하는 부분을 찾아서 치환하기 위해서는 먼저 “찾아야” 한다. 따라서, RegExpReplace() 함수는 ECMA Script에 기술된 대로 RegExpExec() 함수를 호출한다. 해당 함수는 Object 클래스의 객체인 result를 반환한다. 아래는 해당 객체에 대하여, Object 클래스의 Print() 멤버함수를 실행시킨 결과이다.\n0x24c761393899: [JSArray] - map: 0x3288b1786611 \u003cMap(HOLEY_ELEMENTS)\u003e [FastProperties] - prototype: 0x39681e485539 \u003cJSArray[0]\u003e - elements: 0x24c7613938d1 \u003cFixedArray[1]\u003e [HOLEY_ELEMENTS] - length: 1 - properties: 0x17db08a02251 \u003cFixedArray[0]\u003e { #length: 0x17db08a4ff89 \u003cAccessorInfo\u003e (const accessor descriptor) #index: 3 (data field 0) #input: 0x39681e4aa699 \u003cString[12]: ___foo___foo\u003e (data field 1) #groups: 0x17db08a022e1 \u003cundefined\u003e (data field 2) } - elements: 0x24c7613938d1 \u003cFixedArray[1]\u003e { 0: 0x24c761393879 \u003cString[3]: foo\u003e } 객체 result의 정보가 출력되는데, 이를 통해 대략 알 수 있는 것은 다음과 같다.\nJSArray 클래스의 객체이다. (JSArray 클래스는 Object 클래스를 상속 받음) elements와 properties라는 FixedArray 객체를 갖는다. elements 객체의 엔트리 0에는 문자열 “foo”가 저장되어 있다. length는 1이다. 객체 elements의 엔트리 개수를 의미한다. properties 객체는 index, input, group이라는 엔트리를 가진다. 앞서, 자바스크립트 계층에서 result 객체를 출력한 내용과, C++ 레이어에서 result 객체를 출력한 내용이 동일한 것으로 생각된다. JSArray나 Object 클래스에 대해서는 추후에 별도로 살펴보아야 할 것 같다.\nFlow of Runtime_RegExpReplace 동일한 방법으로 해당 PoC에 대하여 C++ 레이어에서 객체 result의 정보를 출력해보면 다음과 같다.\n0x2bea81a10e31: [JS_OBJECT_TYPE] - map: 0x98850a8cf41 \u003cMap(HOLEY_ELEMENTS)\u003e [FastProperties] - prototype: 0x22efc2684649 \u003cObject map = 0x98850a822b1\u003e - elements: 0x7268cc02251 \u003cFixedArray[0]\u003e [HOLEY_ELEMENTS] - properties: 0x7268cc02251 \u003cFixedArray[0]\u003e { #length: \u003cunboxed double\u003e 4.29497e+09 (data field 0) } 해당 PoC는 exec() 메소드를 임의의 함수로 대체한다. 대체한 함수는 0xfffffffe를 반환한다. 한편, 위 결과를 보면 FixedArray 객체인 properties의 엔트리 length가 double 타입의 4.29497e+09 값임을 알 수 있다. 이 값은 0xfffffffe와 동일한 값이다. 즉, exec() 메소드가 반환하는 double 타입의 값이 length 프로퍼티에 저장된다.\nlength는 원본 문자열에서 정규표현식과 일치하는 부분의 개수이다. 따라서, RegExpReplace() 함수는 본연의 목적을 위해 length 만큼 루프를 돌면서 정규표현식과 일치하는 모든 부분들을 치환하여야 한다. 이러한 루프는 코드 상에서는 물론, ECMA Script 명세에서도 확인할 수 있다. RegExpReplace() 함수는 객체 result의 length 프로퍼티의 값을 int 타입의 변수인 captures_length에 저장한다.\nInteger overflow by explicit type conversion 정수 오버플로우가 발현되는 부분은 이 link 부분이다. 변수 captures_length는 PositiveNumberToUint32() 함수를 통해 객체 result의 length 프로퍼티의 값을 받는다. 함수의 이름에서부터 감이 오기 시작한다. 해당 함수는 length 프로퍼티의 값을 받아와 uint 타입으로 변환하여 반환한다. 문제는 이 반환 값을 받는 변수인 captures_length가 int 타입이라는 점이다. 결국, length 프로퍼티의 값이 4,294,967,295 값임에도 변수 captures_length의 값은 -2가 된다.\nCrashing 이후의 코드를 따라가다 보면, int 타입의 변수 argc가 contents_length + 2로 계산이 되어 결국 0이 된다. 만약, PoC가 변조한 exec() 메소드를 0xfffffffd가 반환하도록 수정하면 argc의 값은 -1이 된다. 결국, 이후에 RegExpReplace() 함수는 0 이하의 Handle 배열을 동적할당 시도하는데, 이 과정에서 크로미움은 강제로 OOM(Out of Memory) 에러를 발생시키고 렌더러 프로세스는 종료된다.\n","wordCount":"713","inLanguage":"en","datePublished":"2018-04-02T22:14:52Z","dateModified":"2018-04-02T22:14:52Z","author":{"@type":"Person","name":"baek9"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://baek9.github.io/posts/2018-04-02-integer_overflow_in_regexp_of_v8/"},"publisher":{"@type":"Organization","name":"code(evening);","logo":{"@type":"ImageObject","url":"https://baek9.github.io/%3Clink%20/%20abs%20url%3E"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script><header class=header><nav class=nav><div class=logo><a href=https://baek9.github.io/ accesskey=h title="Home (Alt + H)"><img src=https://baek9.github.io/apple-touch-icon.png alt=logo aria-label=logo height=35>Home</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://baek9.github.io/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://baek9.github.io/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://baek9.github.io/about_me/ title="About Me"><span>About Me</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://baek9.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://baek9.github.io/posts/>Posts</a></div><h1 class=post-title>Integer Overflow in V8</h1><div class=post-meta><span title='2018-04-02 22:14:52 +0000 UTC'>April 2, 2018</span>&nbsp;·&nbsp;4 min&nbsp;·&nbsp;713 words&nbsp;·&nbsp;baek9&nbsp;|&nbsp;<a href=https://github.com/%3cpath_to_repo%3e/content/posts/2018-04-02-Integer_Overflow_in_RegExp_of_V8.markdown rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=post-content><p>최근 취약점들을 살펴보면 순수하게 <code>V8</code>과 관련된 취약점은 별로 없고, 그나마 JavaScript로 시작하되 최종적으로는 <code>Blink</code>나 <code>Chrome</code>에서 취약점이 발생하는 경우들이 많은 것 같다. 와중에 최근에 등록된 버그가 눈길을 끌었다. <code>V8</code> 내부에서 정수 오버플로우(Integer Overflow)를 유발하는 PoC(Proof of Concept)를 제시하고 있었다. 대략적인 <code>V8</code>의 구조와 정수 오버플로우가 어떤 것인지 알게된 의미있는 분석이었다.</p><h2 id=regexpprototypereplace>RegExp.prototype[@@replace]<a hidden class=anchor aria-hidden=true href=#regexpprototypereplace>#</a></h2><p>해당 PoC는 결국에 C++ 함수인 <code>Runtime_RegExpReplace()</code>에서 발현된다.(이하 RegExpReplace) 이 함수는 자바스크립트 레벨에서 <code>RegExp.prototype[@@replace]</code> 메소드(이하 replace)에 대응되는 함수이다. <code>RegExp</code>는 무엇일까? 정규표현식을 표현하고 처리하기 위한 객체로 이해하면 된다. 다음 코드를 예로 들면,</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>var</span> <span class=nx>re</span> <span class=o>=</span> <span class=sr>/-/g</span><span class=p>;</span> 
</span></span></code></pre></div><p>re는 <code>RegExp</code> 객체이다. re에 대입한 &ldquo;/-/g"의 의미는 임의의 문장에서 &ldquo;-&ldquo;와 일치하는 모든 부분을 의미한다. 뒤에 붙은 ‘g’는 &ldquo;global"의 약자로서 일치하는 부분을 모두 식별하겠다는 의미이다. 한편, MDN(Mozilla Developers Network)에서 제시하는 <code>replace()</code> 메소드의 용법과 예제는 다음과 같다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>var</span> <span class=nx>str</span> <span class=o>=</span> <span class=s1>&#39;2016-01-01&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=c1>// regexp[Symbol.replace](str, newSubStr|function)
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>var</span> <span class=nx>newstr</span> <span class=o>=</span> <span class=nx>re</span><span class=p>[</span><span class=nx>Symbol</span><span class=p>.</span><span class=nx>replace</span><span class=p>](</span><span class=nx>str</span><span class=p>,</span> <span class=s1>&#39;.&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>newstr</span><span class=p>);</span>  <span class=c1>// 2016.01.01
</span></span></span></code></pre></div><p><code>replace()</code> 메소드는 <code>RegExp</code> 객체의 메소드이다. 이 메소드는 <code>Symbol</code> 타입으로 정의되어 있다. 이 타입은 최신 ECMA Script에 새로 추가된 것으로서, 잘 모르기도 하지만 본 포스트의 주제와 맞지 않으므로 생략한다. 어쨌든, <code>replace()</code> 메소드는 두 개의 인자를 받는다. 첫 번째 인자는 원본 문자열이고, 두 번째 인자는 원본 문자열에서 정규표현식과 일치하는 부분을 치환하고자 하는 치환 문자열이다. 위 예에서 “2016-01-01“이라는 원본 문자열은 ‘-‘이 ‘.’으로 모두 치환된다.</p><h2 id=regexpprototypeexec>RegExp.prototype.exec()<a hidden class=anchor aria-hidden=true href=#regexpprototypeexec>#</a></h2><p><code>RegExp</code> 객체의 <code>exec()</code> 메소드는 원본 문자열에서 정규표현식과 일치하는 부분을 객체 형태로 반환한다. 아래 예제를 보자.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>var</span> <span class=nx>re</span> <span class=o>=</span> <span class=sr>/foo/g</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>result</span> <span class=o>=</span> <span class=nx>re</span><span class=p>.</span><span class=nx>exec</span><span class=p>(</span><span class=s1>&#39;___foo___foo&#39;</span><span class=p>);</span>
</span></span></code></pre></div><p>객체 result는 원본 문자열에서 주어진 정규표현식과 일치하는 부분들에 대한 정보를 담는다. 아래는 해당 객체의 내용을 출력해 본 것이다.원본 문자열인 “___foo___foo”를 input 프로퍼티에, 정규표현식과 일치하는 부분 문자열인 “foo”를 0 프로퍼티에 담고 있다. 두 번 일치하지만 “foo”는 하나이므로 length가 1인 것으로 생각된다. 또, 원본 문자열에서 정규표현식과 일치하는 첫 번째 문자열이 시작하는 위치가 4이므로, index 프로퍼티에 4가 저장된 것으로 생각된다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=nx>result</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=mi>0</span><span class=o>:</span><span class=s2>&#34;foo&#34;</span>
</span></span><span class=line><span class=cl>  <span class=nx>index</span><span class=o>:</span><span class=mi>3</span>
</span></span><span class=line><span class=cl>  <span class=nx>input</span><span class=o>:</span><span class=s2>&#34;___foo___foo&#34;</span>
</span></span><span class=line><span class=cl>  <span class=nx>length</span><span class=o>:</span><span class=mi>1</span>
</span></span><span class=line><span class=cl>  <span class=nx>__proto__</span><span class=o>:</span><span class=nb>Array</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h2 id=regexputilsregexpexec>RegExpUtils::RegExpExec()<a hidden class=anchor aria-hidden=true href=#regexputilsregexpexec>#</a></h2><p><code>RegExp.prototype.exec()</code> 함수는 <code>V8</code> 내부에서 <code>RegExpExec()</code> 함수를 호출하는 것으로 생각된다. 당연한 말이지만, 정규표현식과 일치하는 부분을 찾아서 치환하기 위해서는 먼저 “찾아야” 한다. 따라서, <code>RegExpReplace()</code> 함수는 ECMA Script에 기술된 대로 <code>RegExpExec()</code> 함수를 호출한다. 해당 함수는 <code>Object</code> 클래스의 객체인 result를 반환한다. 아래는 해당 객체에 대하여, <code>Object</code> 클래스의 <code>Print()</code> 멤버함수를 실행시킨 결과이다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=mh>0x24c761393899</span><span class=o>:</span> <span class=p>[</span><span class=nx>JSArray</span><span class=p>]</span>
</span></span><span class=line><span class=cl> <span class=o>-</span> <span class=nx>map</span><span class=o>:</span> <span class=mh>0x3288b1786611</span> <span class=o>&lt;</span><span class=nx>Map</span><span class=p>(</span><span class=nx>HOLEY_ELEMENTS</span><span class=p>)</span><span class=o>&gt;</span> <span class=p>[</span><span class=nx>FastProperties</span><span class=p>]</span>
</span></span><span class=line><span class=cl> <span class=o>-</span> <span class=nx>prototype</span><span class=o>:</span> <span class=mh>0x39681e485539</span> <span class=o>&lt;</span><span class=nx>JSArray</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl> <span class=o>-</span> <span class=nx>elements</span><span class=o>:</span> <span class=mh>0x24c7613938d1</span> <span class=o>&lt;</span><span class=nx>FixedArray</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span><span class=o>&gt;</span> <span class=p>[</span><span class=nx>HOLEY_ELEMENTS</span><span class=p>]</span>
</span></span><span class=line><span class=cl> <span class=o>-</span> <span class=nx>length</span><span class=o>:</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl> <span class=o>-</span> <span class=nx>properties</span><span class=o>:</span> <span class=mh>0x17db08a02251</span> <span class=o>&lt;</span><span class=nx>FixedArray</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span><span class=o>&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=err>#</span><span class=nx>length</span><span class=o>:</span> <span class=mh>0x17db08a4ff89</span> <span class=o>&lt;</span><span class=nx>AccessorInfo</span><span class=o>&gt;</span> <span class=p>(</span><span class=kr>const</span> <span class=nx>accessor</span> <span class=nx>descriptor</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=err>#</span><span class=nx>index</span><span class=o>:</span> <span class=mi>3</span> <span class=p>(</span><span class=nx>data</span> <span class=nx>field</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=err>#</span><span class=nx>input</span><span class=o>:</span> <span class=mh>0x39681e4aa699</span> <span class=o>&lt;</span><span class=nb>String</span><span class=p>[</span><span class=mi>12</span><span class=p>]</span><span class=o>:</span> <span class=nx>___foo___foo</span><span class=o>&gt;</span> <span class=p>(</span><span class=nx>data</span> <span class=nx>field</span> <span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=err>#</span><span class=nx>groups</span><span class=o>:</span> <span class=mh>0x17db08a022e1</span> <span class=o>&lt;</span><span class=kc>undefined</span><span class=o>&gt;</span> <span class=p>(</span><span class=nx>data</span> <span class=nx>field</span> <span class=mi>2</span><span class=p>)</span>
</span></span><span class=line><span class=cl> <span class=p>}</span>
</span></span><span class=line><span class=cl> <span class=o>-</span> <span class=nx>elements</span><span class=o>:</span> <span class=mh>0x24c7613938d1</span> <span class=o>&lt;</span><span class=nx>FixedArray</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span><span class=o>&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>           <span class=mi>0</span><span class=o>:</span> <span class=mh>0x24c761393879</span> <span class=o>&lt;</span><span class=nb>String</span><span class=p>[</span><span class=mi>3</span><span class=p>]</span><span class=o>:</span> <span class=nx>foo</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl> <span class=p>}</span>
</span></span></code></pre></div><p>객체 result의 정보가 출력되는데, 이를 통해 대략 알 수 있는 것은 다음과 같다.</p><ol><li><code>JSArray</code> 클래스의 객체이다. (JSArray 클래스는 Object 클래스를 상속 받음)</li><li>elements와 properties라는 FixedArray 객체를 갖는다.</li><li>elements 객체의 엔트리 0에는 문자열 “foo”가 저장되어 있다.</li><li>length는 1이다. 객체 elements의 엔트리 개수를 의미한다.</li><li>properties 객체는 index, input, group이라는 엔트리를 가진다.</li></ol><p>앞서, 자바스크립트 계층에서 result 객체를 출력한 내용과, C++ 레이어에서 result 객체를 출력한 내용이 동일한 것으로 생각된다. <code>JSArray</code>나 <code>Object</code> 클래스에 대해서는 추후에 별도로 살펴보아야 할 것 같다.</p><h2 id=flow-of-runtime_regexpreplace>Flow of <code>Runtime_RegExpReplace</code><a hidden class=anchor aria-hidden=true href=#flow-of-runtime_regexpreplace>#</a></h2><p>동일한 방법으로 해당 PoC에 대하여 C++ 레이어에서 객체 result의 정보를 출력해보면 다음과 같다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=mh>0x2bea81a10e31</span><span class=o>:</span> <span class=p>[</span><span class=nx>JS_OBJECT_TYPE</span><span class=p>]</span>
</span></span><span class=line><span class=cl> <span class=o>-</span> <span class=nx>map</span><span class=o>:</span> <span class=mh>0x98850a8cf41</span> <span class=o>&lt;</span><span class=nx>Map</span><span class=p>(</span><span class=nx>HOLEY_ELEMENTS</span><span class=p>)</span><span class=o>&gt;</span> <span class=p>[</span><span class=nx>FastProperties</span><span class=p>]</span>
</span></span><span class=line><span class=cl> <span class=o>-</span> <span class=nx>prototype</span><span class=o>:</span> <span class=mh>0x22efc2684649</span> <span class=o>&lt;</span><span class=nb>Object</span> <span class=nx>map</span> <span class=o>=</span> <span class=mh>0x98850a822b1</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl> <span class=o>-</span> <span class=nx>elements</span><span class=o>:</span> <span class=mh>0x7268cc02251</span> <span class=o>&lt;</span><span class=nx>FixedArray</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span><span class=o>&gt;</span> <span class=p>[</span><span class=nx>HOLEY_ELEMENTS</span><span class=p>]</span>
</span></span><span class=line><span class=cl> <span class=o>-</span> <span class=nx>properties</span><span class=o>:</span> <span class=mh>0x7268cc02251</span> <span class=o>&lt;</span><span class=nx>FixedArray</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span><span class=o>&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=err>#</span><span class=nx>length</span><span class=o>:</span> <span class=o>&lt;</span><span class=nx>unboxed</span> <span class=kr>double</span><span class=o>&gt;</span> <span class=mf>4.29497</span><span class=nx>e</span><span class=o>+</span><span class=mi>09</span> <span class=p>(</span><span class=nx>data</span> <span class=nx>field</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl> <span class=p>}</span>
</span></span></code></pre></div><p>해당 PoC는 <code>exec()</code> 메소드를 임의의 함수로 대체한다. 대체한 함수는 0xfffffffe를 반환한다. 한편, 위 결과를 보면 FixedArray 객체인 properties의 엔트리 length가 double 타입의 4.29497e+09 값임을 알 수 있다. 이 값은 0xfffffffe와 동일한 값이다. 즉, <code>exec()</code> 메소드가 반환하는 double 타입의 값이 length 프로퍼티에 저장된다.</p><p>length는 원본 문자열에서 정규표현식과 일치하는 부분의 개수이다. 따라서, <code>RegExpReplace()</code> 함수는 본연의 목적을 위해 length 만큼 루프를 돌면서 정규표현식과 일치하는 모든 부분들을 치환하여야 한다. 이러한 루프는 코드 상에서는 물론, ECMA Script 명세에서도 확인할 수 있다. <code>RegExpReplace()</code> 함수는 객체 result의 length 프로퍼티의 값을 int 타입의 변수인 captures_length에 저장한다.</p><h2 id=integer-overflow-by-explicit-type-conversion>Integer overflow by explicit type conversion<a hidden class=anchor aria-hidden=true href=#integer-overflow-by-explicit-type-conversion>#</a></h2><p>정수 오버플로우가 발현되는 부분은 이 <a href="https://cs.chromium.org/chromium/src/v8/src/runtime/runtime-regexp.cc?type=cs&rcl=365bb5bb4a1dd62908baf0fad9d075fbcab695ed&l=1797">link</a> 부분이다. 변수 captures_length는 <code>PositiveNumberToUint32()</code> 함수를 통해 객체 result의 length 프로퍼티의 값을 받는다. 함수의 이름에서부터 감이 오기 시작한다. 해당 함수는 length 프로퍼티의 값을 받아와 uint 타입으로 변환하여 반환한다. 문제는 이 반환 값을 받는 변수인 captures_length가 int 타입이라는 점이다. 결국, length 프로퍼티의 값이 4,294,967,295 값임에도 변수 captures_length의 값은 -2가 된다.</p><h2 id=crashing>Crashing<a hidden class=anchor aria-hidden=true href=#crashing>#</a></h2><p>이후의 코드를 따라가다 보면, int 타입의 변수 argc가 contents_length + 2로 계산이 되어 결국 0이 된다. 만약, PoC가 변조한 <code>exec()</code> 메소드를 0xfffffffd가 반환하도록 수정하면 argc의 값은 -1이 된다. 결국, 이후에 <code>RegExpReplace()</code> 함수는 0 이하의 <code>Handle&lt;Object></code> 배열을 동적할당 시도하는데, 이 과정에서 크로미움은 강제로 OOM(Out of Memory) 에러를 발생시키고 렌더러 프로세스는 종료된다.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://baek9.github.io/tags/integer-overflow/>Integer Overflow</a></li><li><a href=https://baek9.github.io/tags/v8/>V8</a></li></ul><nav class=paginav><a class=prev href=https://baek9.github.io/posts/2019-04-09-https%EC%9D%98_%EC%9B%90%EB%A6%AC_%EA%B7%B8%EB%A6%AC%EA%B3%A0_self-signed-ssl_%EA%B9%8C%EC%A7%80/><span class=title>« Prev</span><br><span>https의 원리, 그리고 Self-signed SSL 까지</span></a>
<a class=next href=https://baek9.github.io/posts/2018-03-18-playing_with_json_in_chromium/><span class=title>Next »</span><br><span>Playing with JSON in Chromium</span></a></nav><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share Integer Overflow in V8 on twitter" href="https://twitter.com/intent/tweet/?text=Integer%20Overflow%20in%20V8&url=https%3a%2f%2fbaek9.github.io%2fposts%2f2018-04-02-integer_overflow_in_regexp_of_v8%2f&hashtags=IntegerOverflow%2cV8"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Integer Overflow in V8 on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fbaek9.github.io%2fposts%2f2018-04-02-integer_overflow_in_regexp_of_v8%2f&title=Integer%20Overflow%20in%20V8&summary=Integer%20Overflow%20in%20V8&source=https%3a%2f%2fbaek9.github.io%2fposts%2f2018-04-02-integer_overflow_in_regexp_of_v8%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Integer Overflow in V8 on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fbaek9.github.io%2fposts%2f2018-04-02-integer_overflow_in_regexp_of_v8%2f&title=Integer%20Overflow%20in%20V8"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Integer Overflow in V8 on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fbaek9.github.io%2fposts%2f2018-04-02-integer_overflow_in_regexp_of_v8%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Integer Overflow in V8 on whatsapp" href="https://api.whatsapp.com/send?text=Integer%20Overflow%20in%20V8%20-%20https%3a%2f%2fbaek9.github.io%2fposts%2f2018-04-02-integer_overflow_in_regexp_of_v8%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Integer Overflow in V8 on telegram" href="https://telegram.me/share/url?text=Integer%20Overflow%20in%20V8&url=https%3a%2f%2fbaek9.github.io%2fposts%2f2018-04-02-integer_overflow_in_regexp_of_v8%2f"><svg viewBox="2 2 28 28"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></div></footer><div id=disqus_thread></div><script>(function(){var e=document,t=e.createElement('script');t.src='https://evening-code.disqus.com/embed.js',t.setAttribute('data-timestamp',+new Date),(e.head||e.body).appendChild(t)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript></article></main><footer class=footer><span>&copy; 2022 <a href=https://baek9.github.io/>code(evening);</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById('menu');menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();var e=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView({behavior:"smooth"}),e==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${e}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script></body></html>