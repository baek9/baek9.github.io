<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>The principle of HTTPS and up to Self-signed SSL | code(evening); Development Diary</title><meta name=keywords content="HTTPS,SSL,PKI"><meta name=description content="#HTTPS #SSL #PKI
One of the things I learned from the Chromium analysis is that more JavaScript methods can be used in web pages accessed via https than http. That is, Chrome grants differentiated rights to web pages according to the scheme. ”http://“, ”https://“, “chrome://“ more powerful? method can be called. The chrome scheme is, of course, different from other schemes in terms of functionality and security because it deals with parts related to the operation of Chrome like the settings page of Chrome (chrome://settings)&mldr; Others were quite surprised."><meta name=author content="baek9"><link rel=canonical href=https://baek9.github.io/en/2019/04/the-principle-of-https-and-up-to-self-signed-ssl/><meta name=google-site-verification content="jxplsfLcADRts9fVC-PBsYD4NFNGHEMo08_Lj3HzSts"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.1b2afdf7fcaa8622a5c1cc704d5ca2da92c173ba5ed24382df9c72b6ca594315.css integrity="sha256-Gyr99/yqhiKlwcxwTVyi2pLBc7pe0kOC35xytspZQxU=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://baek9.github.io/logo_squared.png><link rel=icon type=image/png sizes=16x16 href=https://baek9.github.io/logo_squared.png><link rel=icon type=image/png sizes=32x32 href=https://baek9.github.io/logo_squared.png><link rel=apple-touch-icon href=https://baek9.github.io/logo_squared.png><link rel=mask-icon href=https://baek9.github.io/logo_squared.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=ko href=https://baek9.github.io/2019/04/https%EC%9D%98-%EC%9B%90%EB%A6%AC-%EA%B7%B8%EB%A6%AC%EA%B3%A0-self-signed-ssl-%EA%B9%8C%EC%A7%80/><link rel=alternate hreflang=en href=https://baek9.github.io/en/2019/04/the-principle-of-https-and-up-to-self-signed-ssl/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><link href=//cdn.jsdelivr.net/gh/wan2land/d2coding/d2coding-full.css rel=stylesheet><link href=//spoqa.github.io/spoqa-han-sans/css/SpoqaHanSansNeo.css rel=stylesheet type=text/css><link href=https://hangeul.pstatic.net/hangeul_static/css/nanum-square.css rel=stylesheet><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-108486276-1","auto"),ga("send","pageview"))</script><meta property="og:title" content="The principle of HTTPS and up to Self-signed SSL"><meta property="og:description" content="#HTTPS #SSL #PKI
One of the things I learned from the Chromium analysis is that more JavaScript methods can be used in web pages accessed via https than http. That is, Chrome grants differentiated rights to web pages according to the scheme. ”http://“, ”https://“, “chrome://“ more powerful? method can be called. The chrome scheme is, of course, different from other schemes in terms of functionality and security because it deals with parts related to the operation of Chrome like the settings page of Chrome (chrome://settings)&mldr; Others were quite surprised."><meta property="og:type" content="article"><meta property="og:url" content="https://baek9.github.io/en/2019/04/the-principle-of-https-and-up-to-self-signed-ssl/"><meta property="og:image" content="https://baek9.github.io/logo_extended.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2019-04-06T22:00:00+00:00"><meta property="article:modified_time" content="2019-04-06T22:00:00+00:00"><meta property="og:site_name" content="code(evening); Development Diary"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://baek9.github.io/logo_extended.png"><meta name=twitter:title content="The principle of HTTPS and up to Self-signed SSL"><meta name=twitter:description content="#HTTPS #SSL #PKI
One of the things I learned from the Chromium analysis is that more JavaScript methods can be used in web pages accessed via https than http. That is, Chrome grants differentiated rights to web pages according to the scheme. ”http://“, ”https://“, “chrome://“ more powerful? method can be called. The chrome scheme is, of course, different from other schemes in terms of functionality and security because it deals with parts related to the operation of Chrome like the settings page of Chrome (chrome://settings)&mldr; Others were quite surprised."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://baek9.github.io/en/posts/"},{"@type":"ListItem","position":2,"name":"The principle of HTTPS and up to Self-signed SSL","item":"https://baek9.github.io/en/2019/04/the-principle-of-https-and-up-to-self-signed-ssl/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"The principle of HTTPS and up to Self-signed SSL","name":"The principle of HTTPS and up to Self-signed SSL","description":"#HTTPS #SSL #PKI\nOne of the things I learned from the Chromium analysis is that more JavaScript methods can be used in web pages accessed via https than http. That is, Chrome grants differentiated rights to web pages according to the scheme. ”http://“, ”https://“, “chrome://“ more powerful? method can be called. The chrome scheme is, of course, different from other schemes in terms of functionality and security because it deals with parts related to the operation of Chrome like the settings page of Chrome (chrome://settings)\u0026hellip; Others were quite surprised.","keywords":["HTTPS","SSL","PKI"],"articleBody":"#HTTPS #SSL #PKI\nOne of the things I learned from the Chromium analysis is that more JavaScript methods can be used in web pages accessed via https than http. That is, Chrome grants differentiated rights to web pages according to the scheme. ”http://“, ”https://“, “chrome://“ more powerful? method can be called. The chrome scheme is, of course, different from other schemes in terms of functionality and security because it deals with parts related to the operation of Chrome like the settings page of Chrome (chrome://settings)… Others were quite surprised.\nIt’s hard to find non-http websites since Chrome started warning that web pages with the http scheme were not secure. However, for web developers, it is cumbersome to test a website being developed with https. This is because you need to purchase a certificate that proves that the website is a secure site. Looking at the sites referenced in writing this post, I could see that there were already many developers who wanted to test more easily.\nI thought about how great it would be if I could connect to the localhost with https. I’m also interested in web development, but I’m more interested in the JavaScript engine than that, so I started looking for it, and there were already great trials and errors. These are the parts you just have to follow. However, I was curious about the general principle of https including certificates, so I put them together separately. For reference, the JavaScript engine runs in a ‘secure context’ for https, allowing method calls with more privileges. See web page below.\nhttps://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts\nHTTPS(HTTP over SSL) ¶ One question. Chrome warns you that it is an unsafe site when you access a web page with the http scheme. In other words, a web page with an https scheme is secure, but how does Chrome know that it is secure? It is only possible to know through an absolutely trusted third party. In this case, the certificate is used. In order to understand the overall mechanism, we first had to know about ‘Asymmetric Cryptography’ and ‘Digital Signature’.\nAsymmetric encryption (= public key encryption) ¶ In symmetric key encryption, the key used to encrypt or decrypt data is the same. The disadvantage of symmetric key encryption is that if the key is leaked, the data is also leaked. For this reason, it is used in file compression that keeps the key alone, and BitLocker, a Windows volume encryption function. What if two people want to have “secure” cryptographic communication? In this case, asymmetric encryption is utilized. In asymmetric encryption, the key used for encryption and the key used for decryption are different. When there are two pairs of keys, A and B, encryption with key A is decrypted with key B, and encryption with key B is decrypted with key A. This post does not contain mathematical contents about asymmetric encryption.\nPublic key signature verification, public key encryption/decryption ¶ What is asymmetric encryption really useful for? As mentioned earlier, it can be used for cryptographic communication between two people. To this end, one of the key pairs is designated as a private key and the other as a public key. The private key should never be made public, and the public key may be made public. No, it is meaningful that it should be disclosed. Are you going to reveal the key? Because of this peculiar characteristic, asymmetric encryption is also called “public key encryption”. You can do two things with public key cryptography. Those are ‘public key signature verification’ and ‘public key encryption/decryption’. First, the public key signature consists of the following procedure.\nPublic key signature verification ¶ Withdrawal: Send the original data text and the cipher text encrypted with the secret key together. 2. Younghee: Receives the original text and the cipher text and compares the original text and the decrypted text decrypted with the public key. When the decrypted text and the original text match, Young-hee can be sure that the sender of the data is the withdrawal. At this time, the cipher text sent by Cheol-su can be decrypted by anyone with the public key. This process is called “signature” because it is the same as authenticity verification and identity verification using a seal.\nAnd public key encryption/decryption is performed in the following procedure.\nPublic key encryption and decryption ¶ Younghee: Sends the ciphertext by encrypting the original data with the public key. 2. Withdrawal: Receive the cipher text and decrypt it with the secret key. Compared with the previous public key signing process, Cheolsu can use the private key to decrypt the ciphertext encrypted by Younghee with the public key. However, since the secret key literally only has the cipher, no one other than the cipher can decrypt the cipher text. That is, by exchanging each other's public key, two people can confirm each other's identity and send and receive data safely by encrypting data with each other's public key.\nElectronic communication using only public key cryptography is known to have poor performance. In my personal opinion, it would be very inconvenient since the data to be transmitted must be encrypted with the public key of all recipients and transmitted individually to each recipient in the case of multi-party encrypted communication. In fact, public key encryption is used only for sharing a symmetric key, and actual communication is performed using the symmetric key.\nPublic Key Infrastructure (PKI) ¶ Encryption communication is impossible by simply knowing public key encryption. ‘Public key infrastructure’ is a term that includes all elements necessary for cryptographic communication based on public key encryption. This includes the contents of a certificate and a certificate authority (CA), which will be described later.\nSSL(Secure Sockets Layer) ¶ With the development of the web, secure communication through the web has been required. Because we had to determine whether the web page the user was viewing had been tampered with. For this purpose, Netscape early developed ‘SSL’ according to the PKI structure. Later, as it was established as a standard, it was renamed TLS (Transport Layer Security). https is a web protocol that runs on top of this SSL.\nThe overall operation of HTTPS ¶ The operation of the https protocol is as follows. Previously, in public key signatures, when the sender sends the original data and the encrypted text with the private key, the receiver can verify the identity of the sender by whether the decrypted text obtained by decrypting the encrypted text with the public key matches the original text. At this time, the cipher text is called “sender’s signature”. Similarly, in the https protocol, the source of data contains the ‘server domain’ and ‘server public key’ that the user wants to access. Source of data and ‘server signature’ is called a ‘certificate’. The part that assumes that you already know the public key of ’ is broken, which leads to serious security flaws. For example, a user who accesses “https://www.google.com” contains the public key of the Google server from the Google server. I received the certificate. Of course, the certificate will be verified with the public key included in the certificate. The question is whether the Google server is a real Google server. If the user entered the wrong address and accessed “googlee.com”, then “googlee.com” is malicious. What if you are impersonating “google.com” with the intention of being\nCA (Certificate Authority) ¶ In the end, you have to verify that the certificate you presumed to have received from the Google server is trustworthy. Otherwise, we have to go directly to Google’s headquarters in San Jose, USA to get the public key of Google’s servers. Similarly, to use Naver, you must go to Naver’s headquarters in Bundang and obtain a public key. However, since this is not possible, the part that verifies the certificate through a third party is included in the PKI. This third party is called a ‘Certificate Authority’ (CA). The role of the CA is to verify that the certificate of the server to which the user is connected can be trusted.\nCertificate Chain ¶ Again, in the scenario where the user accesses “https://www.google.com”, the user will receive a certificate from the Google server. This certificate contains ‘server domain’, ‘server public key’, as well as ‘CA domain’ and ‘CA signature’, not the server. To verify this certificate, you need the CA’s public key because the signature is that of the CA. At this time, the meaning that the signature of the certificate is verified can be interpreted as follows.\nThe signature of the certificate has been verified - == The certificate is authentic signed by the CA - == The server that sent the certificate is trusted - == The public key included in the certificate is the server's. Where the hell are you? It is in the 'CA certificate' that is included in the operating system and Chrome browser in advance. In the end, it looks like the server certificate is verified with the CA certificate. This is called a 'certificate chain'. CA itself is inevitably trusted. For this reason, it is not good for security to use software from unreliable sources, such as using a cracked operating system or web browser. Self-signed SSL ¶ Because of the above complex PKI structure, it is not easy to test a website that is served as https in advance. This is because the domain and server public key of the website to be tested must be sent to the CA to obtain a server certificate. To recap, this certificate contains the following:\nServer Domain - Server Public Key - CA Domain - CA Signing In the end, the website developer is in a situation where he has to obtain a certificate from a CA for the test website. (It is unlikely that a strict CA will issue a certificate for the test website anyway).\nIf so, how great would it be if I could act as a CA myself? If you search with the keyword Self Signed SSL, many articles are already pouring out. Among them, I would like to introduce the process of self-signing the certificate for localhost.\n1. (CA side) Generate CA secret key ¶ In order to act as a CA (root CA), a private key and a public key must be generated as a CA. The following command uses a program called OpenSSL to generate a 2048-bit secret key with RSA (Rivest-Shamir-Adleman), a representative public key encryption algorithm, and store it in rootCA.key. The des3 option means to encrypt the secret key once more with 3DES (Triple Data Encryption Standard), a symmetric key algorithm. Because the secret key must never be leaked, it is for protection once again, and the encryption key will be requested immediately after entering the command below.\n$ openssl genrsa -des3 -out rootCA.key 2048 // rootCA.key 생성됨 2. (CA side) Generate CA certificate ¶ Through the command below, a public key for CA that is paired with a private key for CA is generated, and a CA certificate signed with the CA private key is generated for the public key and basic information of the CA. The CA certificate generated in this way will be registered as a trusted certificate in the web browser or operating system. Subsequently, whether the server certificate received from the local web server is trusted is determined using this CA certificate. The x509 option means to generate a certificate in X.509 format, and the nodes (not the plural form of node…) option means not to encrypt the public key for CA. The sha256 option means to use the SHA256 hash algorithm for signature generation. In fact, when generating a signature, data is not encrypted with the private key as it is, but data processed with a hash value is encrypted with the private key. The days option sets the validity period of the certificate. This command creates a certificate that is valid for 1,024 days. Eventually, a CA certificate called rootCA.crt is created.\n$ openssl req -x509 -new -nodes -key rootCA.key -sha256 -days 1024 -out rootCA.crt // rootCA.crt 생성됨 If you run the above command, you will be asked for a password to use the CA private key to generate the CA public key and to generate the CA signature. For this password, input the symmetric key used when encrypting the CA private key with DES3. Next, we will ask you some basic information as a CA. For example, information such as the CA’s nationality, name, and domain.\n3. (Server side) Generate server secret key (can be omitted) ¶ Now it’s time to generate the server secret key. Enter the following in the same way as the CA secret key was generated. There is no des3 option, but the des3 option is the default option. First, the server secret key will not be generated now, but will be generated in the next process.\n$ openssl genrsa -out server.key 2048 // server.key 생성됨 4. (Server side) Generate server private/public key and CSR ¶ Typically, a web developer must send a server domain and server public key to a CA and request to issue a server certificate signed with the CA private key. This request is called a CSR (Certificate Signing Request). Information necessary to generate CSR can be written in a separate file and provided to OpenSSL. If you look at server.csr.cnf below, server information is written in “[dn]”. At this time, the CN field must be entered correctly. Even if the server certificate is signed by the CA, if the domain of the site the user wants to access is not included in the domain listed in the CN field, the browser blocks the access. The reason for the blocking is that a typo occurred when writing the CSR, or the certificate was issued incorrectly to the wrong site because the CA’s private key was leaked. Both cases lead to serious security incidents. It is said that a CA called Diginota went bankrupt due to the leak of the secret key.\n# server.csr.cnf (for creating csr) [req] default_bits = 2048 prompt = no default_md = sha256 distinguished_name = dn [dn] C=US ST=RandomState L=RandomCity O=RandomOrganization OU=RandomOrganizationUnit emailAddress=hello@example.com CN = localhost The command below creates a CSR called server.csr based on the server information in server.csr.cnf created above. At this time, the server private key created with the newkey option is also used. It was explained that the server public key is included when generating the CSR. In fact, when OpenSSL generates the private key, it already includes the public key as well as the private key. This will be further described below. Anyway, the generated CSR is signed with the server secret key. In the end, server.key, which is a server secret key, and server.csr, which is a CSR, are generated.\n$ openssl req -new -sha256 -nodes -out server.csr \\ -newkey rsa:2048 -keyout server.key \\ -config \u003c( cat server.csr.cnf ) // server.key, server.csr 생성됨 5. (CA side) Generate server certificate ¶ The CA needs to send the server certificate signed by the CA private key with the CSR received from the server. Extension fields can be added to certificate generation. If you look at the v3.ext file below, the third extension of the X.509 standard, which is the format of the certificate, is contained. These extensions include a Subject Alternative Name (SAN) field that allows you to trust multiple domains with a single certificate.\n# v3.ext(for creating X509 v3 certificate) authorityKeyIdentifier=keyid,issuer basicConstraints=CA:FALSE keyUsage = digitalSignature, nonRepudiation, keyEncipherment, dataEncipherment subjectAltName = @alt_names [alt_names] DNS.1 = localhost The command below creates a server certificate by attaching the X.509 extension field contained in v3.ext created earlier to the previously created CSR server.csr. This certificate is signed with the CA private key, rootCA.key. Eventually, a server certificate called server.crt is created.\n$ openssl x509 -req -in server.csr -CA rootCA.crt -CAkey rootCA.key -CAcreateserial \\ -out server.crt -days 500 -sha256 -extfile v3.ext // server.crt 생성됨 +. Generation of private/public key ¶ What I was curious about while following the above process was that there was no process of explicitly generating the public key even though the private key and public key were a pair. It was suspected that the public key was included in the private key, but the genrsa command of OpenSSL only said to generate the private key. In fact, what is generated by genrsa is various factors necessary for generating private and public keys, and they are said to be used to quickly generate private and public keys whenever necessary.\nhttps://stackoverflow.com/a/44350448\n","wordCount":"2746","inLanguage":"en","datePublished":"2019-04-06T22:00:00Z","dateModified":"2019-04-06T22:00:00Z","author":{"@type":"Person","name":"baek9","url":"https://baek9.github.io/"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://baek9.github.io/en/2019/04/the-principle-of-https-and-up-to-self-signed-ssl/"},"publisher":{"@type":"Organization","name":"code(evening); Development Diary","logo":{"@type":"ImageObject","url":"https://baek9.github.io/logo_squared.png"}}}</script></head><body id=top><style>.button-62{background:linear-gradient(to bottom right,#EF4765,#FF9A5A);border:0;border-radius:12px;cursor:pointer;display:inherit;font-family:-apple-system,system-ui,segoe ui,Roboto,Helvetica,Arial,sans-serif;font-size:16px;font-weight:500;line-height:2.5;outline:transparent;padding:0 1rem;text-align:center;text-decoration:none;transition:box-shadow .2s ease-in-out;user-select:none;-webkit-user-select:none;touch-action:manipulation;white-space:nowrap}.button-62:not([disabled]):focus{box-shadow:0 0 .25rem rgba(0,0,0,.5),-.125rem -.125rem 1rem rgba(239,71,101,.5),.125rem .125rem 1rem rgba(255,154,90,.5)}.button-62:not([disabled]):hover{box-shadow:0 0 .25rem rgba(0,0,0,.5),-.125rem -.125rem 1rem rgba(239,71,101,.5),.125rem .125rem 1rem rgba(255,154,90,.5)}</style><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><div class=social-icons><a href=https://baek9.github.io/en/ accesskey=h title="Development Diary (Alt + H)"><img src=https://baek9.github.io/logo.png style=border-radius:5px;padding:6px;background:#fff alt=logo aria-label=logo height=45>Development Diary</a></div><div class="social-icons logo-switches"><ul id=menu><li><div style=vertical-align:center;line-height:16px><a href=https://linkedin.com/in/thnam target=_blank rel="noopener noreferrer me" title=Linkedin><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 8a6 6 0 016 6v7h-4v-7a2 2 0 00-2-2 2 2 0 00-2 2v7h-4v-7a6 6 0 016-6z"/><rect x="2" y="9" width="4" height="12"/><circle cx="4" cy="4" r="2"/></svg></a></div></li><li><div style=vertical-align:center;line-height:16px><a href=https://twitter.com/thnam_ target=_blank rel="noopener noreferrer me" title=Twitter><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M23 3a10.9 10.9.0 01-3.14 1.53 4.48 4.48.0 00-7.86 3v1A10.66 10.66.0 013 4s-4 9 5 13a11.64 11.64.0 01-7 2c9 5 20 0 20-11.5a4.5 4.5.0 00-.08-.83A7.72 7.72.0 0023 3z"/></svg></a></div></li><li><div style=vertical-align:center;line-height:16px><a href=https://github.com/baek9 target=_blank rel="noopener noreferrer me" title=Github><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a></div></li><li><div style=vertical-align:center;line-height:16px><a href=https://baek9.github.io/index.xml target=_blank rel="noopener noreferrer me" title=Rss><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a></div></li></ul></div></div><ul id=menu><li><a href=https://baek9.github.io/en/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://baek9.github.io/en/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://baek9.github.io/en/about_me/ title="About Me"><span>About Me</span></a></li></ul></nav></header><main class=main style=min-height:unset><style>.post-title{margin-bottom:2px;font-size:30px}.post-content h2{font-size:25px}.entry-footer{font-size:10px}</style><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://baek9.github.io/en/>Home</a>&nbsp;»&nbsp;<a href=https://baek9.github.io/en/posts/>Posts</a></div><h1 class=post-title>The principle of HTTPS and up to Self-signed SSL</h1><div class=post-meta><span title='2019-04-06 22:00:00 +0000 UTC'>April 6, 2019</span>&nbsp;·&nbsp;baek9&nbsp;|&nbsp;Translations:<ul class=i18n_list><li><a href=https://baek9.github.io/2019/04/https%EC%9D%98-%EC%9B%90%EB%A6%AC-%EA%B7%B8%EB%A6%AC%EA%B3%A0-self-signed-ssl-%EA%B9%8C%EC%A7%80/>🇰🇷</a></li></ul></div></header><style>#figmask{width:100%}#figmask{position:relative}#figmask:after{width:100%;content:'';display:block;position:absolute;top:0;left:0;background:linear-gradient(to top,var(--entry) 0,transparent 5em);height:100%}</style><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#httpshttp-over-ssl>HTTPS(HTTP over SSL)</a></li><li><a href=#asymmetric-encryption--public-key-encryption>Asymmetric encryption (= public key encryption)</a></li><li><a href=#public-key-signature-verification-public-key-encryptiondecryption>Public key signature verification, public key encryption/decryption</a><ul><li><a href=#public-key-signature-verification>Public key signature verification</a></li><li><a href=#public-key-encryption-and-decryption>Public key encryption and decryption</a></li></ul></li><li><a href=#public-key-infrastructure-pki>Public Key Infrastructure (PKI)</a></li><li><a href=#sslsecure-sockets-layer>SSL(Secure Sockets Layer)</a></li><li><a href=#the-overall-operation-of-https>The overall operation of HTTPS</a></li><li><a href=#ca-certificate-authority>CA (Certificate Authority)</a></li><li><a href=#certificate-chain>Certificate Chain</a></li><li><a href=#self-signed-ssl>Self-signed SSL</a><ul><li><a href=#1-ca-side-generate-ca-secret-key>1. (CA side) Generate CA secret key</a></li><li><a href=#2-ca-side-generate-ca-certificate>2. (CA side) Generate CA certificate</a></li><li><a href=#3-server-side-generate-server-secret-key-can-be-omitted>3. (Server side) Generate server secret key (can be omitted)</a></li><li><a href=#4-server-side-generate-server-privatepublic-key-and-csr>4. (Server side) Generate server private/public key and CSR</a></li><li><a href=#5-ca-side-generate-server-certificate>5. (CA side) Generate server certificate</a></li><li><a href=#-generation-of-privatepublic-key>+. Generation of private/public key</a></li></ul></li></ul></nav></div></details></div><style>.highlight{margin-bottom:5.5em;font-family:poppins,sans-serif;font-weight:700;text-decoration:none;background:linear-gradient(to right,#64ffff,#64ffff),linear-gradient(to right,red,#4378ff,#64ffff);background-size:100% 3px,0 3px;background-position:100% 100%,0 100%;background-repeat:no-repeat;transition:background-size 400ms}</style><div class=post-content><p>#HTTPS #SSL #PKI</p><p>One of the things I learned from the Chromium analysis is that more JavaScript methods can be used in web pages accessed via https than http. That is, Chrome grants differentiated rights to web pages according to the scheme. ”http://“, ”https://“, “chrome://“ more powerful? method can be called. The chrome scheme is, of course, different from other schemes in terms of functionality and security because it deals with parts related to the operation of Chrome like the settings page of Chrome (chrome://settings)&mldr; Others were quite surprised.</p><p>It&rsquo;s hard to find non-http websites since Chrome started warning that web pages with the http scheme were not secure. However, for web developers, it is cumbersome to test a website being developed with https. This is because you need to purchase a certificate that proves that the website is a secure site. Looking at the sites referenced in writing this post, I could see that there were already many developers who wanted to test more easily.</p><p>I thought about how great it would be if I could connect to the localhost with https. I&rsquo;m also interested in web development, but I&rsquo;m more interested in the JavaScript engine than that, so I started looking for it, and there were already great trials and errors. These are the parts you just have to follow. However, I was curious about the general principle of https including certificates, so I put them together separately. For reference, the JavaScript engine runs in a &lsquo;secure context&rsquo; for https, allowing method calls with more privileges. See web page below.</p><p><a href=https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts title=https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts target=_blank rel="noreferrer noopener nofollow">https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts</a></p><div class=post-entry style=background:unset;border:unset><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8701780565311862"></script>
<ins class=adsbygoogle style=display:block;text-align:center data-ad-layout=in-article data-ad-format=fluid data-ad-client=ca-pub-8701780565311862 data-ad-slot=3363952713></ins>
<script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div><h2 id=httpshttp-over-ssl>HTTPS(HTTP over SSL) <a href=#httpshttp-over-ssl>¶</a><a hidden class=anchor aria-hidden=true href=#httpshttp-over-ssl>#</a></h2><p>One question. Chrome warns you that it is an unsafe site when you access a web page with the http scheme. In other words, a web page with an https scheme is secure, but how does Chrome know that it is secure? It is only possible to know through an absolutely trusted third party. In this case, the certificate is used. In order to understand the overall mechanism, we first had to know about &lsquo;Asymmetric Cryptography&rsquo; and &lsquo;Digital Signature&rsquo;.</p><div class=post-entry style=background:unset;border:unset><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8701780565311862"></script>
<ins class=adsbygoogle style=display:block;text-align:center data-ad-layout=in-article data-ad-format=fluid data-ad-client=ca-pub-8701780565311862 data-ad-slot=3363952713></ins>
<script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div><h2 id=asymmetric-encryption--public-key-encryption>Asymmetric encryption (= public key encryption) <a href=#asymmetric-encryption--public-key-encryption>¶</a><a hidden class=anchor aria-hidden=true href=#asymmetric-encryption--public-key-encryption>#</a></h2><p>In symmetric key encryption, the key used to encrypt or decrypt data is the same. The disadvantage of symmetric key encryption is that if the key is leaked, the data is also leaked. For this reason, it is used in file compression that keeps the key alone, and BitLocker, a Windows volume encryption function. What if two people want to have &ldquo;secure&rdquo; cryptographic communication? In this case, asymmetric encryption is utilized. In asymmetric encryption, the key used for encryption and the key used for decryption are different. When there are two pairs of keys, A and B, encryption with key A is decrypted with key B, and encryption with key B is decrypted with key A. This post does not contain mathematical contents about asymmetric encryption.</p><div class=post-entry style=background:unset;border:unset><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8701780565311862"></script>
<ins class=adsbygoogle style=display:block;text-align:center data-ad-layout=in-article data-ad-format=fluid data-ad-client=ca-pub-8701780565311862 data-ad-slot=3363952713></ins>
<script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div><h2 id=public-key-signature-verification-public-key-encryptiondecryption>Public key signature verification, public key encryption/decryption <a href=#public-key-signature-verification-public-key-encryptiondecryption>¶</a><a hidden class=anchor aria-hidden=true href=#public-key-signature-verification-public-key-encryptiondecryption>#</a></h2><p>What is asymmetric encryption really useful for? As mentioned earlier, it can be used for cryptographic communication between two people. To this end, one of the key pairs is designated as a private key and the other as a public key. The private key should never be made public, and the public key may be made public. No, it is meaningful that it should be disclosed. Are you going to reveal the key? Because of this peculiar characteristic, asymmetric encryption is also called “public key encryption”. You can do two things with public key cryptography. Those are &lsquo;public key signature verification&rsquo; and &lsquo;public key encryption/decryption&rsquo;. First, the public key signature consists of the following procedure.</p><h3 id=public-key-signature-verification>Public key signature verification <a href=#public-key-signature-verification>¶</a><a hidden class=anchor aria-hidden=true href=#public-key-signature-verification>#</a></h3><ol><li>Withdrawal: Send the original data text and the cipher text encrypted with the secret key together. 2. Younghee: Receives the original text and the cipher text and compares the original text and the decrypted text decrypted with the public key.</li></ol><p>When the decrypted text and the original text match, Young-hee can be sure that the sender of the data is the withdrawal. At this time, the cipher text sent by Cheol-su can be decrypted by anyone with the public key. This process is called “signature” because it is the same as authenticity verification and identity verification using a seal.</p><p>And public key encryption/decryption is performed in the following procedure.</p><h3 id=public-key-encryption-and-decryption>Public key encryption and decryption <a href=#public-key-encryption-and-decryption>¶</a><a hidden class=anchor aria-hidden=true href=#public-key-encryption-and-decryption>#</a></h3><ol><li>Younghee: Sends the ciphertext by encrypting the original data with the public key. 2. Withdrawal: Receive the cipher text and decrypt it with the secret key.</li></ol><p>Compared with the previous public key signing process, Cheolsu can use the private key to decrypt the ciphertext encrypted by Younghee with the public key. However, since the secret key literally only has the cipher, no one other than the cipher can decrypt the cipher text. That is, by exchanging each other's public key, two people can confirm each other's identity and send and receive data safely by encrypting data with each other's public key.</p><p>Electronic communication using only public key cryptography is known to have poor performance. In my personal opinion, it would be very inconvenient since the data to be transmitted must be encrypted with the public key of all recipients and transmitted individually to each recipient in the case of multi-party encrypted communication. In fact, public key encryption is used only for sharing a symmetric key, and actual communication is performed using the symmetric key.</p><div class=post-entry style=background:unset;border:unset><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8701780565311862"></script>
<ins class=adsbygoogle style=display:block;text-align:center data-ad-layout=in-article data-ad-format=fluid data-ad-client=ca-pub-8701780565311862 data-ad-slot=3363952713></ins>
<script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div><h2 id=public-key-infrastructure-pki>Public Key Infrastructure (PKI) <a href=#public-key-infrastructure-pki>¶</a><a hidden class=anchor aria-hidden=true href=#public-key-infrastructure-pki>#</a></h2><p>Encryption communication is impossible by simply knowing public key encryption. &lsquo;Public key infrastructure&rsquo; is a term that includes all elements necessary for cryptographic communication based on public key encryption. This includes the contents of a certificate and a certificate authority (CA), which will be described later.</p><div class=post-entry style=background:unset;border:unset><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8701780565311862"></script>
<ins class=adsbygoogle style=display:block;text-align:center data-ad-layout=in-article data-ad-format=fluid data-ad-client=ca-pub-8701780565311862 data-ad-slot=3363952713></ins>
<script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div><h2 id=sslsecure-sockets-layer>SSL(Secure Sockets Layer) <a href=#sslsecure-sockets-layer>¶</a><a hidden class=anchor aria-hidden=true href=#sslsecure-sockets-layer>#</a></h2><p>With the development of the web, secure communication through the web has been required. Because we had to determine whether the web page the user was viewing had been tampered with. For this purpose, Netscape early developed &lsquo;SSL&rsquo; according to the PKI structure. Later, as it was established as a standard, it was renamed TLS (Transport Layer Security). https is a web protocol that runs on top of this SSL.</p><div class=post-entry style=background:unset;border:unset><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8701780565311862"></script>
<ins class=adsbygoogle style=display:block;text-align:center data-ad-layout=in-article data-ad-format=fluid data-ad-client=ca-pub-8701780565311862 data-ad-slot=3363952713></ins>
<script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div><h2 id=the-overall-operation-of-https>The overall operation of HTTPS <a href=#the-overall-operation-of-https>¶</a><a hidden class=anchor aria-hidden=true href=#the-overall-operation-of-https>#</a></h2><p>The operation of the https protocol is as follows. Previously, in public key signatures, when the sender sends the original data and the encrypted text with the private key, the receiver can verify the identity of the sender by whether the decrypted text obtained by decrypting the encrypted text with the public key matches the original text. At this time, the cipher text is called “sender’s signature”. Similarly, in the https protocol, the source of data contains the ‘server domain’ and ‘server public key’ that the user wants to access. Source of data and ‘server signature’ is called a &lsquo;certificate&rsquo;. The part that assumes that you already know the public key of &rsquo; is broken, which leads to serious security flaws. For example, a user who accesses &ldquo;<a href=https://www.google.com target=_blank rel="noreferrer noopener nofollow">https://www.google.com</a>&rdquo; contains the public key of the Google server from the Google server. I received the certificate. Of course, the certificate will be verified with the public key included in the certificate. The question is whether the Google server is a real Google server. If the user entered the wrong address and accessed “googlee.com”, then “googlee.com” is malicious. What if you are impersonating &ldquo;google.com&rdquo; with the intention of being</p><div class=post-entry style=background:unset;border:unset><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8701780565311862"></script>
<ins class=adsbygoogle style=display:block;text-align:center data-ad-layout=in-article data-ad-format=fluid data-ad-client=ca-pub-8701780565311862 data-ad-slot=3363952713></ins>
<script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div><h2 id=ca-certificate-authority>CA (Certificate Authority) <a href=#ca-certificate-authority>¶</a><a hidden class=anchor aria-hidden=true href=#ca-certificate-authority>#</a></h2><p>In the end, you have to verify that the certificate you presumed to have received from the Google server is trustworthy. Otherwise, we have to go directly to Google&rsquo;s headquarters in San Jose, USA to get the public key of Google&rsquo;s servers. Similarly, to use Naver, you must go to Naver&rsquo;s headquarters in Bundang and obtain a public key. However, since this is not possible, the part that verifies the certificate through a third party is included in the PKI. This third party is called a &lsquo;Certificate Authority&rsquo; (CA). The role of the CA is to verify that the certificate of the server to which the user is connected can be trusted.</p><div class=post-entry style=background:unset;border:unset><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8701780565311862"></script>
<ins class=adsbygoogle style=display:block;text-align:center data-ad-layout=in-article data-ad-format=fluid data-ad-client=ca-pub-8701780565311862 data-ad-slot=3363952713></ins>
<script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div><h2 id=certificate-chain>Certificate Chain <a href=#certificate-chain>¶</a><a hidden class=anchor aria-hidden=true href=#certificate-chain>#</a></h2><p>Again, in the scenario where the user accesses “https://www.google.com”, the user will receive a certificate from the Google server. This certificate contains &lsquo;server domain&rsquo;, &lsquo;server public key&rsquo;, as well as &lsquo;CA domain&rsquo; and &lsquo;CA signature&rsquo;, not the server. To verify this certificate, you need the CA&rsquo;s public key because the signature is that of the CA. At this time, the meaning that the signature of the certificate is verified can be interpreted as follows.</p><ul><li>The signature of the certificate has been verified - == The certificate is authentic signed by the CA - == The server that sent the certificate is trusted - == The public key included in the certificate is the server's. Where the hell are you? It is in the 'CA certificate' that is included in the operating system and Chrome browser in advance. In the end, it looks like the server certificate is verified with the CA certificate. This is called a 'certificate chain'. CA itself is inevitably trusted. For this reason, it is not good for security to use software from unreliable sources, such as using a cracked operating system or web browser.</li></ul><div class=post-entry style=background:unset;border:unset><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8701780565311862"></script>
<ins class=adsbygoogle style=display:block;text-align:center data-ad-layout=in-article data-ad-format=fluid data-ad-client=ca-pub-8701780565311862 data-ad-slot=3363952713></ins>
<script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div><h2 id=self-signed-ssl>Self-signed SSL <a href=#self-signed-ssl>¶</a><a hidden class=anchor aria-hidden=true href=#self-signed-ssl>#</a></h2><p>Because of the above complex PKI structure, it is not easy to test a website that is served as https in advance. This is because the domain and server public key of the website to be tested must be sent to the CA to obtain a server certificate. To recap, this certificate contains the following:</p><ul><li>Server Domain - Server Public Key - CA Domain - CA Signing</li></ul><p>In the end, the website developer is in a situation where he has to obtain a certificate from a CA for the test website. (It is unlikely that a strict CA will issue a certificate for the test website anyway).</p><p>If so, how great would it be if I could act as a CA myself? If you search with the keyword Self Signed SSL, many articles are already pouring out. Among them, I would like to introduce the process of self-signing the certificate for localhost.</p><h3 id=1-ca-side-generate-ca-secret-key>1. (CA side) Generate CA secret key <a href=#1-ca-side-generate-ca-secret-key>¶</a><a hidden class=anchor aria-hidden=true href=#1-ca-side-generate-ca-secret-key>#</a></h3><p>In order to act as a CA (root CA), a private key and a public key must be generated as a CA. The following command uses a program called OpenSSL to generate a 2048-bit secret key with RSA (Rivest-Shamir-Adleman), a representative public key encryption algorithm, and store it in rootCA.key. The des3 option means to encrypt the secret key once more with 3DES (Triple Data Encryption Standard), a symmetric key algorithm. Because the secret key must never be leaked, it is for protection once again, and the encryption key will be requested immediately after entering the command below.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>$ openssl genrsa -des3 -out rootCA.key <span class=m>2048</span>
</span></span><span class=line><span class=cl>// rootCA.key 생성됨
</span></span></code></pre></div><h3 id=2-ca-side-generate-ca-certificate>2. (CA side) Generate CA certificate <a href=#2-ca-side-generate-ca-certificate>¶</a><a hidden class=anchor aria-hidden=true href=#2-ca-side-generate-ca-certificate>#</a></h3><p>Through the command below, a public key for CA that is paired with a private key for CA is generated, and a CA certificate signed with the CA private key is generated for the public key and basic information of the CA. The CA certificate generated in this way will be registered as a trusted certificate in the web browser or operating system. Subsequently, whether the server certificate received from the local web server is trusted is determined using this CA certificate. The x509 option means to generate a certificate in X.509 format, and the nodes (not the plural form of node&mldr;) option means not to encrypt the public key for CA. The sha256 option means to use the SHA256 hash algorithm for signature generation. In fact, when generating a signature, data is not encrypted with the private key as it is, but data processed with a hash value is encrypted with the private key. The days option sets the validity period of the certificate. This command creates a certificate that is valid for 1,024 days. Eventually, a CA certificate called rootCA.crt is created.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>$ openssl req -x509 -new -nodes -key rootCA.key -sha256 -days <span class=m>1024</span> -out rootCA.crt
</span></span><span class=line><span class=cl>// rootCA.crt 생성됨
</span></span></code></pre></div><p>If you run the above command, you will be asked for a password to use the CA private key to generate the CA public key and to generate the CA signature. For this password, input the symmetric key used when encrypting the CA private key with DES3. Next, we will ask you some basic information as a CA. For example, information such as the CA&rsquo;s nationality, name, and domain.</p><h3 id=3-server-side-generate-server-secret-key-can-be-omitted>3. (Server side) Generate server secret key (can be omitted) <a href=#3-server-side-generate-server-secret-key-can-be-omitted>¶</a><a hidden class=anchor aria-hidden=true href=#3-server-side-generate-server-secret-key-can-be-omitted>#</a></h3><p>Now it&rsquo;s time to generate the server secret key. Enter the following in the same way as the CA secret key was generated. There is no des3 option, but the des3 option is the default option. First, the server secret key will not be generated now, but will be generated in the next process.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>$ openssl genrsa -out server.key <span class=m>2048</span> 
</span></span><span class=line><span class=cl>// server.key 생성됨
</span></span></code></pre></div><h3 id=4-server-side-generate-server-privatepublic-key-and-csr>4. (Server side) Generate server private/public key and CSR <a href=#4-server-side-generate-server-privatepublic-key-and-csr>¶</a><a hidden class=anchor aria-hidden=true href=#4-server-side-generate-server-privatepublic-key-and-csr>#</a></h3><p>Typically, a web developer must send a server domain and server public key to a CA and request to issue a server certificate signed with the CA private key. This request is called a CSR (Certificate Signing Request). Information necessary to generate CSR can be written in a separate file and provided to OpenSSL. If you look at server.csr.cnf below, server information is written in “[dn]”. At this time, the CN field must be entered correctly. Even if the server certificate is signed by the CA, if the domain of the site the user wants to access is not included in the domain listed in the CN field, the browser blocks the access. The reason for the blocking is that a typo occurred when writing the CSR, or the certificate was issued incorrectly to the wrong site because the CA&rsquo;s private key was leaked. Both cases lead to serious security incidents. It is said that a CA called Diginota went bankrupt due to the leak of the secret key.</p><pre tabindex=0><code># server.csr.cnf (for creating csr)
[req]
default_bits = 2048
prompt = no
default_md = sha256
distinguished_name = dn

[dn]
C=US
ST=RandomState
L=RandomCity
O=RandomOrganization
OU=RandomOrganizationUnit
emailAddress=hello@example.com
CN = localhost
</code></pre><p>The command below creates a CSR called server.csr based on the server information in server.csr.cnf created above. At this time, the server private key created with the newkey option is also used. It was explained that the server public key is included when generating the CSR. In fact, when OpenSSL generates the private key, it already includes the public key as well as the private key. This will be further described below. Anyway, the generated CSR is signed with the server secret key. In the end, server.key, which is a server secret key, and server.csr, which is a CSR, are generated.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>$ openssl req -new -sha256 -nodes -out server.csr <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    -newkey rsa:2048 -keyout server.key <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    -config &lt;<span class=o>(</span> cat server.csr.cnf <span class=o>)</span>
</span></span><span class=line><span class=cl> // server.key, server.csr 생성됨
</span></span></code></pre></div><h3 id=5-ca-side-generate-server-certificate>5. (CA side) Generate server certificate <a href=#5-ca-side-generate-server-certificate>¶</a><a hidden class=anchor aria-hidden=true href=#5-ca-side-generate-server-certificate>#</a></h3><p>The CA needs to send the server certificate signed by the CA private key with the CSR received from the server. Extension fields can be added to certificate generation. If you look at the v3.ext file below, the third extension of the X.509 standard, which is the format of the certificate, is contained. These extensions include a Subject Alternative Name (SAN) field that allows you to trust multiple domains with a single certificate.</p><pre tabindex=0><code># v3.ext(for creating X509 v3 certificate)
authorityKeyIdentifier=keyid,issuer
basicConstraints=CA:FALSE
keyUsage = digitalSignature, nonRepudiation, keyEncipherment, dataEncipherment
subjectAltName = @alt_names

[alt_names]
DNS.1 = localhost
</code></pre><p>The command below creates a server certificate by attaching the X.509 extension field contained in v3.ext created earlier to the previously created CSR server.csr. This certificate is signed with the CA private key, rootCA.key. Eventually, a server certificate called server.crt is created.</p><pre tabindex=0><code class=language-script data-lang=script>$ openssl x509 -req -in server.csr -CA rootCA.crt -CAkey rootCA.key -CAcreateserial \
-out server.crt -days 500 -sha256 -extfile v3.ext
// server.crt 생성됨
</code></pre><h3 id=-generation-of-privatepublic-key>+. Generation of private/public key <a href=#-generation-of-privatepublic-key>¶</a><a hidden class=anchor aria-hidden=true href=#-generation-of-privatepublic-key>#</a></h3><p>What I was curious about while following the above process was that there was no process of explicitly generating the public key even though the private key and public key were a pair. It was suspected that the public key was included in the private key, but the genrsa command of OpenSSL only said to generate the private key. In fact, what is generated by genrsa is various factors necessary for generating private and public keys, and they are said to be used to quickly generate private and public keys whenever necessary.</p><p><a href=https://stackoverflow.com/a/44350448 title=https://stackoverflow.com/a/44350448 target=_blank rel="noreferrer noopener nofollow">https://stackoverflow.com/a/44350448</a></p></div><div class="post-entry toc" style=margin-bottom:0><div id=disqus_thread></div><script>(function(){var e=document,t=e.createElement("script");t.src="https://evening-code.disqus.com/embed.js",t.setAttribute("data-timestamp",+new Date),(e.head||e.body).appendChild(t)})(),document.addEventListener("themeChanged",function(){document.readyState=="complete"&&DISQUS.reset({reload:!0,config:disqus_config})})</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript></article></main><link rel=stylesheet href=https://unpkg.com/swiper/swiper-bundle.min.css><style>.swiper{width:100%;height:200%}.swiper-slide{text-align:center;font-size:18px;width:30%;height:200%;display:-webkit-box;display:-ms-flexbox;display:-webkit-flex;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;-webkit-align-items:center;align-items:center}@media screen and (max-width:576px){.swiper-slide{width:70%}}.swiper-slide{opacity:.5;pointer-events:none;transition:all .3s}.swiper-slide-active,.swiper-slide-prev,.swiper-slide-next{opacity:1;pointer-events:auto}.swiper-slide img{display:block;width:100%;height:100%;object-fit:cover;margin:auto}.icon{display:inline-block;width:1em;height:1em;stroke-width:0;stroke:currentColor;fill:currentColor}.news-slider__ctr{width:100%;z-index:12;margin:0;position:absolute;top:50%;-ms-transform:translateY(-50%);transform:translateY(-50%)}.news-slider__arrow{background:currentColor;opacity:.5;border:none;display:inline-flex;width:50px;height:50px;justify-content:center;align-items:center;border-radius:50%;position:absolute;top:50%;z-index:12;cursor:pointer;outline:none!important}.news-slider__arrow:focus{outline:none!important}.news-slider__arrow .icon-font{display:inline-flex}.news-slider__arrow.news-slider-prev{left:15px;transform:translateY(-50%)}.news-slider__arrow.news-slider-next{right:15px;transform:translateY(-50%)}.news-slider__pagination{text-align:center;margin-top:50px}.news-slider__pagination .swiper-pagination-bullet{width:13px;height:10px;display:inline-block;background:#fff;opacity:.2;margin:0 5px;border-radius:20px;transition:opacity .5s,background-color .5s,width .5s;transition-delay:.5s,.5s,0s}.news-slider__pagination .swiper-pagination-bullet-active{opacity:1;background:#fff;width:100px;transition-delay:0s}@media screen and (max-width:768px){.news-slider__pagination .swiper-pagination-bullet-active{width:70px}.news-slider__ctr{display:none}}</style><script src=https://unpkg.com/swiper/swiper-bundle.min.js></script>
<script>var swiper=new Swiper(".mySwiper",{effect:"coverflow",loop:!0,centeredSlides:!0,slidesPerView:"auto",coverflowEffect:{rotate:0,stretch:0,depth:0,modifier:3,slideShadows:!1},navigation:{nextEl:".news-slider-next",prevEl:".news-slider-prev"},pagination:{el:".news-slider__pagination",clickable:!0}})</script><footer class=footer style=margin-bottom:0><article class=post-entry style=transform:scale(1);background-color:var(--code-bg)><span>NEIGHBORS</span><div style=line-height:10px;display:flex;flex-wrap:wrap><a style=border-bottom:0;bottom:unset href=https://beintous.net rel="noopener noreferrer" target=_blank title="SEO "><span><img style=margin-inline-start:14px;border-radius:3px src=https://baek9.github.io/beintous.png alt=SEO aria-label=logo height=30></span></a>
<a style=border-bottom:0;bottom:unset href=https://traceback.co.kr rel="noopener noreferrer" target=_blank title="코딩 "><span><img style=margin-inline-start:14px;border-radius:3px src=https://baek9.github.io/traceback.png alt=코딩 aria-label=logo height=30></span></a>
<a style=border-bottom:0;bottom:unset href=https://neppster.com rel="noopener noreferrer" target=_blank title="노하우 "><span><img style=margin-inline-start:14px;border-radius:3px src=https://baek9.github.io/neppster.png alt=노하우 aria-label=logo height=30></span></a>
<a style=border-bottom:0;bottom:unset href=https://hannuricenter.modoo.at rel="noopener noreferrer" target=_blank title="대구 언어치료 "><span><img style=margin-inline-start:14px;border-radius:3px src=https://baek9.github.io/hannuri.jpeg alt="대구 언어치료" aria-label=logo height=30></span></a>
<a style=border-bottom:0;bottom:unset href=https://julesflower.com rel="noopener noreferrer" target=_blank title="거제 꽃집 "><span><img style=margin-inline-start:14px;border-radius:3px src=https://baek9.github.io/jules.jpeg alt="거제 꽃집" aria-label=logo height=30></span></a></div></article></footer><footer class=footer><span>&copy; 2022 <a href=https://baek9.github.io/en/>code(evening); Development Diary</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer nofollow" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel="noopener noreferrer nofollow" target=_blank>PaperMod</a></span></footer><style>.sticky_share_btn{position:fixed;right:30px;bottom:30px}.share-toggle,.fixed_share{font-size:20px;width:40px;height:40px;display:flex;align-items:center;justify-content:center;cursor:pointer;border:2px solid;border-radius:50%;transition:all .5s ease-in-out;opacity:.5}.fixed_share{margin-bottom:10px}.share-toggle:hover,.fixed_share:hover{transform:scale(1.1)rotate(360deg)}.fixed_share .facebook,.fixed_share .facebook>a{color:#4267b2}</style><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css><div class=sticky_share_btn><div class=lang-switch role=button id=theme-toggle><div id=sun class=fixed_share style=color:#ff0><i class="fa fa-sun"></i></div><div id=moon class=fixed_share style=color:#000><i id=moon class="fa fa-moon"></i></div></div><div class="lang-switch fixed_share"><a href=https://baek9.github.io/2019/04/https%EC%9D%98-%EC%9B%90%EB%A6%AC-%EA%B7%B8%EB%A6%AC%EA%B3%A0-self-signed-ssl-%EA%B9%8C%EC%A7%80/>🇰🇷</a></div><div class="lang-switch fixed_share"><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" id=top-link accesskey=g><i class="fa-solid fa-arrow-up"></i></a></div></div><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"));const e=new Event("themeChanged");document.dispatchEvent(e)})</script><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script></body></html>